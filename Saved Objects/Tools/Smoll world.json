{
  "SaveName": "",
  "GameMode": "",
  "Gravity": 0.5,
  "PlayArea": 0.5,
  "Date": "",
  "Table": "",
  "Sky": "",
  "Note": "",
  "Rules": "",
  "XmlUI": "",
  "LuaScript": "",
  "LuaScriptState": "",
  "ObjectStates": [
    {
      "Name": "Custom_Token",
      "Transform": {
        "posX": -67.1450043,
        "posY": 2.200173,
        "posZ": -46.9998856,
        "rotX": 0.0118062627,
        "rotY": 179.999313,
        "rotZ": 359.797852,
        "scaleX": 2.29723287,
        "scaleY": 1.0,
        "scaleZ": 2.29723287
      },
      "Nickname": "",
      "Description": "ADVENTURE QUICK MAP\n\nPlace a Bag over to show the board and starting area of the level.\nPush the Trash Can to remove it.",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.803,
        "g": 0.7519999,
        "b": 0.678
      },
      "Locked": true,
      "Grid": true,
      "Snap": false,
      "IgnoreFoW": false,
      "Autoraise": false,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "https://sites.google.com/site/rolesystemssky/stage3.png?attredirects=0",
        "ImageSecondaryURL": "",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomToken": {
          "Thickness": 0.1,
          "MergeDistancePixels": 25.0,
          "Stackable": false
        }
      },
      "XmlUI": "",
      "LuaScript": "cb = \"imCopy\"  ss = \"\"  sb = \"\"  bb = nil  prs = \"\"  sid = nil  sod = {}  zz = 0  z2 = 0  uls = \"\"\n\nfunction onLoad()\n    self.setColorTint({0.803, 0.752, 0.678})\n    local btn = {}  btn.function_owner = self\n    btn.click_function = \"btnBag\"\n    btn.position = {1.62, -0.05, 0.67}  btn.rotation = {0, 0, 0}\n    btn.width = 285  btn.height = 370\n    self.createButton(btn)\n    btn.click_function = \"btnTrash\"\n    btn.position = {-1.30, -0.05, 0.67}  btn.rotation = {0, 0, 0}\n    btn.width = 320  btn.height = 370\n    self.createButton(btn)\n    btn.click_function = \"btnGetSod\"\n    btn.position = {0, -0.05, -0.91}  btn.rotation = {0, 0, 0}\n    btn.width = 300  btn.height = 300\n    self.createButton(btn)\n    btn.click_function = \"btnUnlock\"\n    btn.position = {0, -0.05, 0.95}  btn.rotation = {0, 0, 0}\n    btn.width = 300  btn.height = 300\n    self.createButton(btn)\n    Global.setVar(\"hld\", 0)  benDare()\nend\n\nfunction update()  if cb then self.call(cb)  end  end\n\nfunction benDare()\n    local aoj = {}  aoj = getAllObjects()  local g = aoj[1]  local n = 1  local p  local v = \"\"\n    while g do\n        p = g.getPosition()\n        if math.modf(p[1]) == 0 and math.modf(p[3]) == 0 and string.sub(g.getName(), 1, 4) == \"SBx_\" then  g.interactable = false  sid = g.getGUID() end\n        if g.getName() == \"tras_h\" then bb = g.getGUID() end\n        if g.getName() == \"_OW_vBase\" then v = v..g.guid end\n        if g.getVar(\"tT_iM\") == \"IgNor_mE\" then v = v..g.guid end\n        n = n+1  g = aoj[n]\n    end  Global.setVar(\"tT_iM\", v)\nend\n\nfunction imCopy()\n    if zz > 5 then  cb = nil\n        if self.guid != \"2d647a\" then\n            broadcastToAll(\"Stage Copies will not work. Save the original Directly to your TTS Saved Objects Chest!\", {0.943, 0.745, 0.14})\n            self.destruct()\n        end\n    end  zz = zz+1\nend\n\nfunction btnBag()\n    if cb or Global.getVar(\"hld\") != 0 then broadcastToAll(\"The Current Set is Busy...\", {0.943, 0.745, 0.14})  do return  end  end\n    local n = 1  ss = \"\"  prs = \"\"  local f  local p  local u = \"@649822@059864@3761d8@ff9bc3@2deca3@\"\n    if not getObjectFromGUID(Global.getVar(\"i_M\")) then benDare() end\n    local l = \"\"  if getObjectFromGUID(Global.getVar(\"i_M\")) then l = getObjectFromGUID(Global.getVar(\"i_M\")).getLuaScript() end\n    Global.setVar(\"hld\", 1)  local v = \"FogOfWarTrigger@ScriptingTrigger@3DText\"\n    local aoj = {}  aoj = getAllObjects()  local g = aoj[1]  local a = string.char(13)..string.char(10)  local k = string.char(44)\n    while g do\n        p = g.getPosition()  f = g.getGUID()\n        if math.abs(p[3]) < 26 and math.abs(p[1]) < 44 and math.abs(p[2]) < 26 then\n            if string.find(u, f) then Global.setVar(\"hld\", 0)  do return  end  end\n            if not string.find(v, g.name) and not string.find(l, g.guid) and g.getName() != \"_OW_vBase\" then\n                local r = g.getRotation()  ss = ss..f  prs = prs..\"--\"..f..k..p[1]..k..p[2]..k..p[3]..k..r[1]..k..r[2]..k..r[3]..a\n            end\n        end\n        n = n+1  g = aoj[n]\n    end\n    if ss != \"\" then\n        local op = {} op.type = \"Bag\" op.callback_owner = self\n        op.callback = \"cbBag\" op.position = {70, 67, 70}  local obj = spawnObject(op)\n        if bb then getObjectFromGUID(bb).destruct()  bb = nil end\n    else Global.setVar(\"hld\", 0) end\nend\n\nfunction cbBag(o)\n    o.setLuaScript(prs)  o.setName(\"SET_\")\n    if sid then\n        if getObjectFromGUID(sid) then\n            getObjectFromGUID(sid).setScale({0.3, 0.3, 0.3})\n            getObjectFromGUID(sid).tooltip = true  getObjectFromGUID(sid).interactable = true\n            o.setName(\"SET_\"..string.sub(getObjectFromGUID(sid).getName(), 5))\n        end sid = nil\n    end\n    o.lock()  o.setScale({15, 1, 15})  o.setRotation({0, 0, 0})  o.setPosition({70, 98, 70})  sb = o.getGUID()\n    zz = 2  z2 = 0  prs = \"\"  cb = \"cbStowAway\"\nend\n\nfunction hmBag()\n    local s = self.getScale()  s = s[1]*2+1.5\n    local r = self.getRotation()  r[2] = r[2]+270  if r[2] > 360 then r[2] = r[2]-360 end\n    local x = math.sin(math.rad(r[2]))*s  local y = x/math.tan(math.rad(r[2]))\n    getObjectFromGUID(sb).setRotation({0, r[2], 0})  getObjectFromGUID(sb).setScale({1, 1, 1})\n    local p = self.getPosition()  getObjectFromGUID(sb).setPosition({p[1]-y, 0.823, p[3]+x})\n    getObjectFromGUID(sb).unlock()  sb = \"\"\nend\n\nfunction cbStowAway()\n    local g  zz = zz+1\n    if zz > 1 then zz = 0\n        g = string.sub(ss, 1, 6)  ss = string.sub(ss, 7)  prs = prs..g\n        if getObjectFromGUID(g) then\n            local s = getObjectFromGUID(g).getScale()  getObjectFromGUID(g).setScale({0.1, 0.2, 0.3})\n            getObjectFromGUID(g).setScale(s)  getObjectFromGUID(g).setPosition({70, 100+z2*0, 70})\n            getObjectFromGUID(sb).putObject(getObjectFromGUID(g))\n        end\n        if ss == \"\" then  z2 = z2+1  if z2 > 3 and z2 < 9 then broadcastToAll(\"Pass \"..z2-2, {0.943, 0.745, 0.14}) end\n            if z2 > 8 then cb = nil  broadcastToAll(\"Manually add \"..(string.len(prs)/6)..\" objects to Bag.\", {0.943, 0.745, 0.14})\n                for zz = 1, string.len(prs), 6 do\n                    g = string.sub(prs, zz, zz+5)\n                    getObjectFromGUID(g).setPosition({0, 2+zz/3, 0})  getObjectFromGUID(g).setPositionSmooth({0, 2.3+zz/3, 0})\n                end  prs = \"\"  Global.setVar(\"hld\", 0)  --hmBag()\n                getObjectFromGUID(sb).setScale({1, 1, 1})  getObjectFromGUID(sb).setPosition({0, 0.823, 0})  getObjectFromGUID(sb).unlock()  sb = \"\"\n            else zz = 0  cb = \"endStowAway\"\n            end\n        end\n    end\nend\n\nfunction endStowAway()\n    zz = zz+1  if zz > 48 then  ss = prs  prs = \"\"  cb = \"cbStowAway\"  do return  end  end\n    local i\n    for i = 1, string.len(prs), 6 do\n        if not getObjectFromGUID(string.sub(prs, i, i+5)) then prs = string.sub(prs, 1, i-1)..string.sub(prs, i+6) end\n    end\n    if prs == \"\" then cb = nill  Global.setVar(\"hld\", 0)  hmBag()  end\nend\n\nfunction btnTrash()\n    if cb or Global.getVar(\"hld\") != 0 then broadcastToAll(\"The Current Set is Busy...\", {0.943, 0.745, 0.14})  do return  end  end\n    if bb then\n        local p  local s = getObjectFromGUID(bb).getLuaScript()\n        if string.sub(s, string.len(s)-1) != string.char(13)..string.char(10) then s = s..string.char(13)..string.char(10) end\n        while s != \"\" do\n            if getObjectFromGUID(string.sub(s, 3, 8)) then\n                p = getObjectFromGUID(string.sub(s, 3, 8)).getPosition()\n                if math.abs(p[3]) < 26 and math.abs(p[1]) < 44 and math.abs(p[2]) < 15 then\n                    if getObjectFromGUID(\"649822\") then getObjectFromGUID(\"649822\").call(\"noSMX\", {string.sub(s, 3, 8)}) end\n                    getObjectFromGUID(string.sub(s, 3, 8)).destruct()  end\n            end\n            s = string.sub(s, string.find(s, string.char(13)..string.char(10))+2)\n        end\n        getObjectFromGUID(bb).destruct()  bb = nil  btnGetSod()\n    end\nend\n\nfunction onCollisionEnter(c)\n    if cb == \"imCopy\" then do return  end  end\n    if cb or Global.getVar(\"hld\") != 0 then broadcastToAll(\"The Current Set is Busy...\", {0.943, 0.745, 0.14})  do return  end  end\n    if  string.sub(c.collision_object.getName(), 1, 4) == \"SET_\" and c.collision_object.name == \"Bag\" then\n        local v = {}  v = c.collision_object.getObjects()\n        local x  local y  local z  local ct = 1  local n  local p  ss = \"\"\n        if getObjectFromGUID(\"649822\") then getObjectFromGUID(\"649822\").setVar(\"ulk\", nil) end\n        prs = c.collision_object.getLuaScript()  btnTrash()  btnGetSod()  Global.setVar(\"hld\", 1)  p = self.getPosition()\n        while v[ct] do\n            if getObjectFromGUID(v[ct].guid) and zz != 0.02 then  zz = 0.02  Global.setVar(\"hld\", 0)\n                c.collision_object.setPosition({p[1], p[2]+0.6, p[3]})  c.collision_object.setPositionSmooth({p[1], p[2]+0.3, p[3]})\n                do return  end\n            end  ct = ct+1\n        end  ct = 1\n        while v[ct] do\n            if getObjectFromGUID(v[ct].guid) then \tbroadcastToAll(\"Duplicate Object: \"..v[ct].guid, {0.943, 0.745, 0.14})\n                Global.setVar(\"hld\", 0)  upWeGo(v[ct].guid)\n                do return  end\n            end  ct = ct+1\n        end  ct = 1  zz = 0\n        bb = c.collision_object.getGUID()  c.collision_object.lock()  c.collision_object.setName(\"tras_h\")\n        c.collision_object.setScale({0, 0, 0})  c.collision_object.setPosition({90, 90, 90})\n        prs = string.gsub(prs, string.char(13)..string.char(10), string.char(44))\n        if string.sub(prs, string.len(prs)) != \",\" then prs = prs..\",\" end\n        while v[ct] do\n            local t = {}  t.guid = v[ct].guid  t.position = {0, ct*2, 0}\n            n = string.find(prs, \"-\"..v[ct].guid)\n            if n then  n = n+8  zz = zz+1\n                x, n = snipIt({n})  y, n = snipIt({n})  z, n = snipIt({n})  t.position = {x-70, y+70, z-70}\n                x, n = snipIt({n})  y, n = snipIt({n})  z, n = snipIt({n})  t.rotation = {x, y, z}\n                t.callback = \"setStage\"  t.callback_owner = self\n            end  t.smooth = false  c.collision_object.takeObject(t)  ct = ct+1\n        end\n    elseif string.sub(c.collision_object.getName(), 1, 4) == \"SBx_\" and c.collision_object.name == \"Custom_Token\" then\n        if sid == c.collision_object.guid then do return  end  end\n        btnGetSod()  c.collision_object.lock()  sid = c.collision_object.getGUID()\n        c.collision_object.tooltip = false  c.collision_object.interactable = false  sod = c.collision_object.getRotation()\n        sod = {math.modf(sod[1]/180+0.5)*180, math.modf(sod[2]/180+0.5)*180, math.modf(sod[3]/180+0.5)*180}\n        c.collision_object.setPosition(sod)  c.collision_object.setScale({18.07, 1, 18.07})\n        zz = 0  cb = \"setSod\"\n    end\nend\n\nfunction snipIt(a)\n    local e = string.find(prs, string.char(44), a[1])\n    return string.sub(prs, a[1], e-1), e+1\nend\n\nfunction setSod()\n    if getObjectFromGUID(sid) then\n        local p = getObjectFromGUID(sid).getPosition()  local r = getObjectFromGUID(sid).getRotation()\n        getObjectFromGUID(sid).setPosition({0, 0.91, 0})  getObjectFromGUID(sid).setRotation(sod)\n        if math.abs(p[1]) < 0.0005 and math.abs(p[2]-0.91) < 0.0005 and math.abs(p[3]) < 0.0005 and math.abs(sod[1]-r[1]) < 0.0005\n        and math.abs(sod[2]-r[2]) < 0.0005 and math.abs(sod[3]-r[3]) < 0.0005 and getObjectFromGUID(sid).resting then\n            cb = nil  else zz = zz+1  if zz > 20 then cb = nil  print(\"Failed Alignment.\")  end\n        end\n    else sid = nil  cb = nil  end\nend\n\nfunction setStage(a)\n    a.resting = true  a.lock()  local n = string.find(prs, \"-\"..a.guid)+8  zz = zz-1\n    y, n = snipIt({n})  z, n = snipIt({n})  x, n = snipIt({n})  a.setPosition({y, z, x})\n    y, n = snipIt({n})  z, n = snipIt({n})  x, n = snipIt({n})  a.setRotation({y, z, x})\n    if string.sub(a.getName(), 1, 4) == \"SBx_\" then a.setScale({18.07, 1, 18.07})\n        sid = a.getGUID()  sod = {y, z, x}  a.tooltip = false  a.interactable = false  end\n    ss = ss..(a.guid)  if zz == 0 then cb = \"popSetQ\" end\nend\n\nfunction popSetQ()\n    zz = zz+1\n    if zz > 5 then zz = 0  z2 = 0  uls = \"\"  cb = \"popSet\"  end\nend\n\nfunction popSet()\n    if ss == \"\" then cb = nil  popSetZ()  do return  end  end\n    local x  local y  local z  local a  local b  local c  local n  local g  local p  local r\n    g = string.sub(ss, 1, 6)  n = string.find(prs, \"-\"..g)+8\n    if not getObjectFromGUID(g) then ss = string.sub(ss, 7)\n        \tbroadcastToAll(\"Missing Object: \"..g, {0.943, 0.745, 0.14})  do return  end  end\n    y, n = snipIt({n})  z, n = snipIt({n})  x, n = snipIt({n})  p = getObjectFromGUID(g).getPosition()\n    a, n = snipIt({n})  b, n = snipIt({n})  c, n = snipIt({n})  r = getObjectFromGUID(g).getRotation()\n    if getObjectFromGUID(g).resting then\n        if math.abs(p[1]-y) < 0.0005 and math.abs(p[2]-z) < 0.0005 and math.abs(p[3]-x) < 0.0005 and\n            math.abs(r[1]-a) < 0.0005 and math.abs(r[2]-b) < 0.0005 and math.abs(r[3]-c) < 0.0005 then\n            z2 = z2+1  if z2 > 9 then zz = 0 end\n        else zz = zz+1\n            getObjectFromGUID(g).setRotation({a, b, c})  getObjectFromGUID(g).setPosition({y, z, x})  getObjectFromGUID(g).resting = true\n        end\n    else getObjectFromGUID(g).resting = true  zz = zz+1\n    end\n    if zz > 99 then print(\"Failed Alignment.\")  zz = 0  end\n    if zz == 0 then ss = string.sub(ss, 7)  z2 = 0\n        if getObjectFromGUID(g).getName() != \"\" and string.sub(getObjectFromGUID(g).getName(), 1, 4) != \"SBx_\" then uls = uls..g  end\n    end\nend\n\nfunction popSetZ()\n    if getObjectFromGUID(\"649822\") then\n        local p = getObjectFromGUID(\"649822\").getPosition()\n        if math.abs(p[3]) < 28 and math.abs(p[1]) < 46 then getObjectFromGUID(\"649822\").setPosition({p[1], p[2]+5, p[3]})  end\n    end  Global.setVar(\"hld\", 0)  \tbroadcastToAll(\"Done...\", {0.943, 0.745, 0.14})\nend\n\nfunction btnGetSod()\n    if sid then\n        if getObjectFromGUID(sid) then\n            local s = self.getScale()  s = s[1]*2+2\n            local p = self.getPosition()  local r = self.getRotation()  if r[2] == 0 then r[2] = 360 end\n            local x = math.sin(math.rad(r[2]))*s  local y = x/math.tan(math.rad(r[2]))  r[2] = r[2]+90\n            getObjectFromGUID(sid).setScale({0.3, 0.3, 0.3})\n            getObjectFromGUID(sid).setRotation({0, r[2], 0})\n            getObjectFromGUID(sid).tooltip = true  getObjectFromGUID(sid).interactable = true  getObjectFromGUID(sid).unlock()\n            getObjectFromGUID(sid).setPosition({p[1]-y, 2.2, p[3]+x})\n            getObjectFromGUID(sid).setPositionSmooth({p[1]-y, 2.5, p[3]+x})\n        end\n        sid = nil\n    end\nend\n\nfunction btnUnlock()\n    if cb or Global.getVar(\"hld\") != 0 then broadcastToAll(\"The Current Set is Busy...\", {0.943, 0.745, 0.14})  do return  end  end\n    local g  local i  print(\"Unlocking Named Set Objects...\")\n    if getObjectFromGUID(\"649822\") then\n        getObjectFromGUID(\"649822\").setVar(\"ulk\", 1)\n        local p = getObjectFromGUID(\"649822\").getPosition()\n        if math.abs(p[3]) <= 28 and math.abs(p[1]) <= 46 then do return end  end\n    end\n    for i = 1, string.len(uls), 6 do\n        g = string.sub(uls, i, i+5)\n        if getObjectFromGUID(g) then getObjectFromGUID(g).unlock() end\n    end\nend\n\nfunction upWeGo(a)\n    local p = getObjectFromGUID(a).getPosition()\n    getObjectFromGUID(a).setPositionSmooth({p[1], p[2]+3, p[3]})\nend\n\n\n\n\n\n--tt\n",
      "LuaScriptState": "",
      "GUID": "2d647a"
    }
  ],
  "TabStates": {},
  "VersionNumber": ""
}